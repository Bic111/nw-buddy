<h3 class="uppercase relative text-center font-caslon text-nw-description px-2">
  <span class="nw-bg-title absolute inset-0 bg-bottom"></span>
  <span class="relative top-1">{{ title | nwText }}</span>
</h3>
<div class="px-2 py-1">
  <table class="mx-auto table table-compact">
    <tr *ngFor="let row of source; first as isFirst; trackBy: trackBy">
      <td class="p-1">
        <div class="flex flex-row items-center">
          <nwb-modifier-source-label [data]="row.source"></nwb-modifier-source-label>
        </div>
      </td>
      <td class="p-1 font-mono font-thin">
        <div class="flex flex-row items-center">
          <ng-container *ngIf="!isFirst"> {{ row.value > 0 ? '+' : '' }} </ng-container>
        </div>
      </td>
      <td class="p-1 font-mono font-thin text-right" [class.text-primary]="row['capped']">
        <div class="flex flex-row items-center">
          {{ row.value * row.scale | percent : '0.1-1' }}
        </div>
      </td>
      <td class="p-1">
        <div class="flex flex-row items-center" *ngIf="row['category']; let category">
          <span class="badge badge-secondary badge-sm">
            {{ category }} (cap @ {{ row['limit'] | percent : '0.1-1' }})
          </span>
        </div>
      </td>
    </tr>
    <tr *ngIf="showSum">
      <td class="p-1"></td>
      <td colspan="2" class="p-1 font-mono font-thin text-right border-double border-t-4">
        <div class="flex flex-col">
          <span [class.line-through]="isOvershoot" [class.opacity-50]="isOvershoot">
            {{ sumValue | percent : '0.1-1' }}
          </span>
          <span *ngIf="isOvershoot" class="text-danger">{{ value | percent : '0.1-1' }}</span>
        </div>
      </td>
    </tr>
  </table>
  <div class="text-sm flex flex-col text-center">
    <div *ngIf="isOvershoot">
      Overshoot by <span class="text-error">{{ sumValue - value | percent : '0.0-3' }}</span>
    </div>
  </div>
</div>
