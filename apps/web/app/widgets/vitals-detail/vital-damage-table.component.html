<div *ngIf="tables$ | async; let tables" [nwbScreenshotFrame]="'DamageTable'">
  <div *ngIf="!tables.length" class="alert shadow-lg my-2 bg-base-100">
    <div>
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        class="stroke-error flex-shrink-0 w-6 h-6"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
        ></path>
      </svg>
      <div>
        <h3 class="font-bold">No damage tables found</h3>
        <div class="text-xs">This creature either has no damage tables or is not in game.</div>
      </div>
    </div>
  </div>
  <div *ngIf="tables.length > 1" class="alert shadow-lg my-2 bg-base-200">
    <div>
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        class="stroke-warning flex-shrink-0 w-6 h-6"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
        ></path>
      </svg>
      <div>
        <h3 class="font-bold">Multiple damage tables found</h3>
        <div class="text-xs">This creature has multiple variations.</div>
      </div>
    </div>
  </div>
  <div *ngFor="let table of tables" class="mb-8">
    <div class="text-center text-primary capitalize font-bold text-2xl">{{ table.name | nwHumanize }}</div>
    <div *ngFor="let row of table.rows" class="flex flex-row items-start gap-1 py-1">
      <picture class="p-1 flex-none">
        <img [nwImage]="row.DamageTypeIcon" class="w-8 h-8 flex-none aspect-square" />
      </picture>
      <div class="flex flex-col leading-none">
        <div class="text-lg leading-tight font-bold">
          <span>{{ row.Name }}</span>
        </div>
        <div class="flex flex-col">
          <div>
            <span class="text-sm">{{ row.WeaponCategory | nwText }}</span>
          </div>
          <div class="flex flex-row gap-1">
            <span class="badge badge-xs badge-primary">{{ row.Damage | number:'0.0-0' }}</span>
            <span class="badge badge-xs">{{ row.DamageTypeName | nwText }}</span>
            <span class="badge badge-xs badge-secondary" *ngIf="row.AttackType; let text">{{ text | nwText }}</span>
            <span class="badge badge-xs badge-info" *ngIf="row.IsRanged">Ranged</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
