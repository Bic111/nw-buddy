
<div class="grid gap-1">
  <ng-container *ngIf="!freeMode">
    <span class="text-xl font-bold">Level</span>
    <span class="text-xl font-bold text-center">{{ level }}</span>
    <span></span>
  </ng-container>
  <span class="text-xl font-bold">Points</span>
  <span class="text-xl font-bold text-center">{{ pointsAvailable$ | async }}</span>
  <span></span>
  <ng-container *ngFor="let stat of stats$ | async; trackBy: trackById" class="flex flex-row">
    <label class=" inline-flex items-center justify-center font-bold text-xl uppercase">{{ stat.name }}</label>
    <div class="flex flex-row gap-1">
      <button class="btn btn-ghost px-1" (click)="decrement(stat.name, 10)">
        <nwb-icon [icon]="arrowsLeft" class="w-4 h-4"></nwb-icon>
      </button>
      <button class="btn btn-ghost px-1" (click)="decrement(stat.name, 1)">
        <nwb-icon [icon]="arrowLeft" class="w-4 h-4"></nwb-icon>
      </button>
      <label class="w-12 px-1 inline-flex flex-col items-center justify-center font-bold">
        <span class="text-xl">{{ stat.total }}</span>
        <span class="text-xs text-accent" *ngIf="stat.assigned && !freeMode">
          (+{{ stat.assigned }})
        </span>
      </label>
      <button class="btn btn-ghost px-1" (click)="increment(stat.name, 1)">
        <nwb-icon [icon]="arrowLeft" class="w-4 h-4 rotate-180"></nwb-icon>
      </button>
      <button class="btn btn-ghost px-1" (click)="increment(stat.name, 10)">
        <nwb-icon [icon]="arrowsLeft" class="w-4 h-4 rotate-180"></nwb-icon>
      </button>
    </div>
    <div class="flex flex-row justify-between items-center relative">
      <progress class="absolute left-0 progress progress-c1 w-full" [value]="stat.total" [max]="stat.max"></progress>
      <progress class="absolute left-0 progress progress-c2 w-full" [value]="stat.base" [max]="stat.max"></progress>
      <span class="relative w-0 h-0"></span>
      <span class="relative badge" [class.c1]="stat.base < 50 && stat.total >= 50" [class.c2]="stat.base >= 50" ></span>
      <span class="relative badge" [class.c1]="stat.base < 100 && stat.total >= 100" [class.c2]="stat.base >= 100" ></span>
      <span class="relative badge" [class.c1]="stat.base < 150 && stat.total >= 150" [class.c2]="stat.base >= 150" ></span>
      <span class="relative badge" [class.c1]="stat.base < 200 && stat.total >= 200" [class.c2]="stat.base >= 200" ></span>
      <span class="relative badge" [class.c1]="stat.base < 250 && stat.total >= 250" [class.c2]="stat.base >= 250" ></span>
      <span class="relative badge" [class.c1]="stat.base < 300 && stat.total >= 300" [class.c2]="stat.base >= 300" ></span>
    </div>
  </ng-container>
</div>
