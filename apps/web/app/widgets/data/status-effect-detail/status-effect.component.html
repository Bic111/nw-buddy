<nwb-item-header class="gap-2">
  <a [nwbItemIcon]="icon$ | async" [nwLink]="effectId$ | async" [nwLinkResource]="'ability'" class="w-[76px] h-[76px]">
  </a>
  <nwb-item-header-content
    class="z-10"
    [title]="nameForDisplay$ | async | nwText | nwTextBreak : ' - '"
    [subTitle]="source$ | async"
    [category]="'Status Effect'"
  ></nwb-item-header-content>
</nwb-item-header>
<div class="p-3 flex flex-col gap-2">
  <ng-container *ngIf="description$ | async | nwText | nwTextBreak; let description">
    <div [innerHTML]="description" class="text-nw-description italic"></div>
    <nwb-item-divider></nwb-item-divider>
  </ng-container>

  <ng-container *ngIf="!disableProperties">
    <nwb-property-grid
      class="gap-x-2 font-mono w-full overflow-auto text-sm leading-tight"
      [item]="properties$ | async"
      [valueFormatter]="formatValue"
    ></nwb-property-grid>
    <ng-container *ngIf="affixProps$ | async; let affix">
      <nwb-item-divider></nwb-item-divider>
      <nwb-property-grid
        class="gap-x-2 font-mono w-full overflow-auto text-sm leading-tight"
        [item]="affix"
      ></nwb-property-grid>
    </ng-container>
  </ng-container>
  <ng-content></ng-content>
</div>

<ng-template [nwbGridValue] let-cell #tplCategory>
  <span
    class="text-secondary"
    [tooltip]="tplCategoryTip"
    [nwbStatusEffectCategoryDetail]="cell.value"
    #detail="effectCategoryDetail"
  >
    <span *ngIf="detail.limits$ | async" class="text-primary text-md">Â·</span>{{ cell.value }}
    <ng-template #tplCategoryTip>
      <ng-container *ngIf="detail.limits$ | async; let limits">
        <div class="p-1 px-2 bg-base-300 uppercase text-sm rounded-t-sm">Value Limits</div>
        <nwb-property-grid [item]="limits" class="py-1 px-2 gap-1 bg-base-100 text-xs font-mono rounded-b-sm">
        </nwb-property-grid>
      </ng-container>
    </ng-template>
  </span>
</ng-template>
