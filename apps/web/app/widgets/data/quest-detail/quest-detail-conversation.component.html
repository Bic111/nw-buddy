@if (npcs()?.length) {
  <h3 class="font-bold flex flex-row justify-between">
    <span>
      Talk to
    </span>
    <nwb-icon [icon]="infoIcon" class="w-4 h-4 opacity-50" [tooltip]="tipNpcs"/>
    <ng-template #tipNpcs>
      <div class="p-2 text-sm max-w-48 ">
        Multiple entries of the same NPC name indicates that this conversation may
        take place at different locations.
      </div>
    </ng-template>
  </h3>
}
@for (npc of npcs(); track $index) {
  <div class="flex flex-row items-center gap-1">
    <a [nwLinkTooltip]="['npc', npc.NPCId]" class="flex-none">
      <img [src]="'/assets/icons/menu/icon_head.png'" class="w-5 h-5" />
    </a>
    <a class="flex-1 link-hover" [routerLink]="['npc', npc.NPCId] | nwLink">
      <span>{{ npc.GenericName | nwText }}</span>
    </a>
  </div>
}
@if (dialog(); as text) {
  <div class="chat chat-start ml-4">
    <div class="chat-bubble" [nwHtml]="text | nwText | nwTextBreak"></div>
  </div>
}
@if (hasRequirements()) {
  <div class="flex flex-col gap-1">
    @if (conversation()?.RequiredAchievement; as value) {
      <h5 class="font-bold">Required Achievement</h5>
      <nwb-required-achievement [achievementId]="value" />
    }

    @if (conversation()?.RequiredFaction; as value) {
      <h5 class="font-bold">Required Faction: {{ value }}</h5>
    }
    @if (conversation()?.RequiredFactionCooldown; as value) {
      <h5 class="font-bold">Required Faction Cooldown: {{ value }}</h5>
    }
    @if (conversation()?.RequiredLevel; as value) {
      <h5 class="font-bold">Required Level: {{ value }}</h5>
    }
    @if (conversation()?.RequiredProgression; as value) {
      <h5 class="font-bold">Required Progression</h5>
      <code class="ml-4 text-xs">{{ value }}</code>
    }
    @if (requiredActiveQuest(); as quest) {
      <h5 class="font-bold">Required Active Quest:</h5>
      <a [routerLink]="['quest', quest.ObjectiveID] | nwLink">
        {{ quest.Title || quest.ObjectiveID | nwText }}
      </a>
    }
    @if (requiredCompletedQuest(); as quest) {
      <h5 class="font-bold">Required Completed Quest:</h5>
      <a [routerLink]="['quest', quest.ObjectiveID] | nwLink">
        {{ quest.Title || quest.ObjectiveID | nwText }}
      </a>
    }
  </div>
}
