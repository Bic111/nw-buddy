<div
  class="flex flex-col relative rounded-md outline outline-2 outline-offset-0 outline-transparent transition-all"
  *ngFor="let item of items$ | async; let isLast = last; trackBy: trackByIndex"
  [class.hover:outline-primary-focus]="isSlotEditable(item)"
  [class.hover:outline-offset-4]="isSlotEditable(item)"
  [class.hover:cursor-pointer]="isSlotEditable(item)"
  (click)="editPerkClicked(item)"
>
  <ng-container *ngFor="let row of item.explain; trackBy: trackByIndex">
    <nwb-item-perk
      [icon]="row.icon"
      [explanation]="row"
      [linkPerkId]="isSlotEditable(item) ? null : item.perkId"
    ></nwb-item-perk>
  </ng-container>
  <ng-container *ngIf="!item.perk && item.bucket">
    <nwb-item-perk [icon]="'assets/icons/crafting_perkbackground.png'" [iconText]="item.bucket.PerkChance | percent">
      Random Perk
    </nwb-item-perk>
  </ng-container>
  <ng-container *ngIf="!item.perk && !item.bucket">
    <nwb-item-perk
      [linkPerkId]="editable$() ? null : item.perkId"
      [icon]="'assets/icons/crafting_perkbackground.png'"
      [iconText]="'?'"
    >
      – Missing –
    </nwb-item-perk>
  </ng-container>
</div>
